{% extends "base.html" %}

{% block content %}
<!-- SecciÃ³n: Turno Actual (Siempre visible para Localhost/Admin) -->
<div class="section-header">
    <h3>ğŸ“Š Resumen del Turno Actual</h3>
    {% if not logged_in %}
    <span class="badge badge-info">Vista PÃºblica (Local)</span>
    {% endif %}
</div>

<div class="stats-grid">
    <div class="card stat-card">
        <div class="stat-value" id="initial-cash">$0.00</div>
        <div class="stat-label">
            ğŸ’° Fondo Inicial
            {% if logged_in %}
            <a href="/session/edit_cash" style="text-decoration: none; color: inherit; margin-left: 5px;">âœï¸</a>
            {% endif %}
        </div>
    </div>
    <div class="card stat-card">
        <div class="stat-value" id="session-sales">$0.00</div>
        <div class="stat-label">ğŸ“ˆ Ventas Turno</div>
    </div>
    <div class="card stat-card highlight">
        <div class="stat-value" id="box-total">$0.00</div>
        <div class="stat-label">ğŸ’µ Total en Caja</div>
    </div>
</div>

<div class="card">
    <h4>Ventas del Turno</h4>
    <ul class="item-list" id="session-sales-list">
        <!-- Session Sales here -->
        <li class="empty-msg">No hay ventas en este turno.</li>
    </ul>
</div>

<!-- SecciÃ³n: Historial (Solo Admin) -->
<div id="historical-section" style="display: none;">
    <hr class="divider">
    <div class="section-header">
        <h3>ğŸ—„ï¸ Historial Completo (Admin)</h3>
    </div>

    <div class="card stat-card">
        <div class="stat-value" id="total-revenue">$0.00</div>
        <div class="stat-label">Ingresos HistÃ³ricos Totales</div>
    </div>

    <div class="card">
        <h4>Ãšltimas Ventas (HistÃ³rico)</h4>
        <ul class="item-list" id="historical-sales-list">
            <!-- Historical Sales here -->
        </ul>
    </div>
</div>
{% endblock %}

{% block scripts %}
<script type="module">
    import { loadStats } from '/static/js/modules/dashboard.js';

    document.addEventListener('DOMContentLoaded', () => {
        loadStats();
        // Refresh every 5 seconds
        setInterval(loadStats, 5000);
    });
</script>
{% endblock %}